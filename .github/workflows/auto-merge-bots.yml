name: Auto-Merge Bot PRs

# Enables the zero-touch loop for all bot-created PRs:
# Bot opens PR -> Copilot auto-review -> PR Eval Gate -> Auto-merge -> Branch deleted
# Human is never assignee, reviewer, or merger.
#
# Calls the reusable workflow (single source of truth).

on:
  pull_request:
    types: [opened, reopened, ready_for_review]
    branches: [main]

jobs:
  auto-merge:
    uses: cianos95-dev/claude-command-centre/.github/workflows/auto-merge-bots-reusable.yml@main
    secrets:
      CLAUDEGBOT_APP_ID: ${{ secrets.CLAUDEGBOT_APP_ID }}
      CLAUDEGBOT_PRIVATE_KEY: ${{ secrets.CLAUDEGBOT_PRIVATE_KEY }}
